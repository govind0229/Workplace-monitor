<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Office Hours Monitor</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="url(#logoGrad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#bb86fc"/><stop offset="100%" stop-color="#03dac6"/></linearGradient></defs>
                <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
            </svg>
            <span>WorkMonitor</span>
        </div>
        <nav>
            <button class="nav-item active" data-view="monitor">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                Dashboard
            </button>
            <button class="nav-item" data-view="history">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8v4l3 3"/><circle cx="12" cy="12" r="10"/></svg>
                History
            </button>
            <button class="nav-item" data-view="settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                Settings
            </button>
        </nav>
        <div class="sidebar-footer">
            <span class="version-badge">v1.2.1</span>
        </div>
    </div>

    <main class="main-content">
        <!-- Monitor View -->
        <div id="monitorView" class="view active">
            <div class="view-title">
                <h2>Dashboard</h2>
                <p class="view-subtitle">Track your working hours in real time</p>
            </div>

            <div class="hero-card glass-card">
                <div class="hero-top">
                    <div class="hero-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                        Workplace Duration
                    </div>
                    <div id="statusBadge" class="status-badge">Checking...</div>
                </div>
                <div id="timerDisplay" class="timer">00:00:00</div>
                <div class="progress-section">
                    <div class="progress-meta">
                        <span class="progress-percent">0%</span>
                        <span class="goal-label">Goal: 4h 10m</span>
                    </div>
                    <div class="progress-container">
                        <div id="progressBar" class="progress-bar"></div>
                    </div>
                </div>
                <div class="controls">
                    <button id="startBtn" class="btn primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        Start Session
                    </button>
                    <button id="pauseBtn" class="btn accent" style="display:none">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                        Pause
                    </button>
                    <button id="stopBtn" class="btn secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>
                        Finish Day
                    </button>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-card glass-card">
                    <div class="stat-icon auto-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Day Working Hours</span>
                        <span id="todayTotalDisplay" class="stat-value">00:00:00</span>
                    </div>
                    <div class="stat-hint">Auto-tracked on unlock</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="glass-card chart-card">
                    <div class="chart-header">
                        <div class="chart-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                            Last 7 Days
                        </div>
                        <div class="chart-legend">
                            <span class="legend-dot legend-workplace"></span><span class="legend-label">Workplace</span>
                            <span class="legend-dot legend-day"></span><span class="legend-label">Day Hours</span>
                        </div>
                    </div>
                    <div id="weeklyChart" class="weekly-chart">
                        <div class="chart-loading">Loading...</div>
                    </div>
                </div>


                <div class="glass-card chart-card ring-card">
                    <div class="chart-header">
                        <div class="chart-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                            Goal Progress
                        </div>
                    </div>
                    <div id="goalRing" class="goal-ring-container">
                        <svg class="goal-ring-svg" viewBox="0 0 120 120">
                            <defs>
                                <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#a78bfa"/>
                                    <stop offset="100%" stop-color="#34d399"/>
                                </linearGradient>
                            </defs>
                            <circle class="ring-bg" cx="60" cy="60" r="52" fill="none" stroke-width="8"/>
                            <circle id="ringProgress" class="ring-fg" cx="60" cy="60" r="52" fill="none" stroke-width="8"
                                stroke-dasharray="326.73" stroke-dashoffset="326.73"/>
                        </svg>
                        <div class="ring-center">
                            <span id="ringPercent" class="ring-percent">0%</span>
                            <span class="ring-sub">of daily goal</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-card chart-card category-card">
                <div class="chart-header">
                    <div class="chart-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                        App Categories — Today
                    </div>
                </div>
                <div id="categoryChart" class="category-chart">
                    <div class="chart-loading">Loading...</div>
                </div>
            </div>

            <div class="glass-card chart-card app-usage-card">
                <div class="chart-header">
                    <div class="chart-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        App Usage — Today
                    </div>
                    <span id="appCount" class="event-count"></span>
                </div>
                <div id="appUsageList" class="app-usage-list">
                    <div class="chart-loading">Loading...</div>
                </div>
            </div>

            <div class="glass-card chart-card timeline-card">
                <div class="chart-header">
                    <div class="chart-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        Today's Activity
                    </div>
                    <span id="eventCount" class="event-count"></span>
                </div>
                <div id="activityTimeline" class="activity-timeline">
                    <div class="chart-loading">Loading...</div>
                </div>
            </div>
        </div>

        <!-- History View -->
        <div id="historyView" class="view">
            <div class="view-title">
                <h2>History</h2>
                <p class="view-subtitle">Review your past work sessions</p>
            </div>
            <div class="glass-card full-width">
                <div class="view-header">
                    <div class="history-toolbar">
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="daily">Daily</button>
                            <button class="tab-btn" data-tab="weekly">Weekly</button>
                            <button class="tab-btn" data-tab="monthly">Monthly</button>
                        </div>
                        <button id="exportCsvBtn" class="btn secondary btn-sm">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            Export CSV
                        </button>
                    </div>
                </div>
                <div id="reportsList" class="reports-list">
                    <!-- Reports will load here -->
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view">
            <div class="view-title">
                <h2>Settings</h2>
                <p class="view-subtitle">Customize your tracking goals and preferences</p>
            </div>
            <div class="glass-card align-left">
                <div class="settings-section-title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                    Appearance
                </div>
                <div class="setting-group">
                    <div class="theme-toggle-row">
                        <span class="theme-label">Theme</span>
                        <div class="theme-switch">
                            <button class="theme-btn active" data-theme="dark">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                                Dark
                            </button>
                            <button class="theme-btn" data-theme="light">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                                Light
                            </button>
                        </div>
                    </div>
                </div>

                <div class="settings-section-title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    Daily Working Goal
                </div>
                <div class="setting-group">
                    <div class="input-row">
                        <div class="input-field">
                            <label>Hours</label>
                            <input type="number" id="goalHours" value="4" min="0">
                        </div>
                        <div class="input-field">
                            <label>Minutes</label>
                            <input type="number" id="goalMinutes" value="10" min="0" max="59">
                        </div>
                    </div>
                </div>
                <div class="settings-section-title" style="margin-top: 32px;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" y1="2" x2="12" y2="12"/></svg>
                    Break Reminder
                </div>
                <div class="setting-group">
                    <div class="input-row">
                        <div class="input-field">
                            <label>Remind every (minutes)</label>
                            <input type="number" id="breakInterval" value="60" min="0" max="480">
                        </div>
                    </div>
                    <p class="setting-hint">Set to 0 to disable. You'll get a notification after this many minutes of continuous work.</p>
                </div>

                <div class="settings-section-title" style="margin-top: 32px;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    Chart Goal Line
                </div>
                <div class="setting-group">
                    <div class="input-row">
                        <div class="input-field">
                            <label>Goal Line Position (%)</label>
                            <input type="number" id="goalLinePercent" value="44" min="0" max="100">
                        </div>
                    </div>
                    <p class="setting-hint">Set the position of the goal line on the Last 7 Days chart (0% = bottom, 100% = top).</p>
                </div>

                <div class="settings-section-title" style="margin-top: 32px;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                    Custom App Categories
                </div>
                <div class="setting-group">
                    <p class="setting-hint" style="margin-bottom: 16px;">Assign apps to categories. Apps you add here will override default categorization.</p>
                    <div class="category-mapping-container">
                        <div class="input-row" style="gap: 8px; margin-bottom: 12px;">
                            <div class="input-field" style="flex: 2;">
                                <label>App Name</label>
                                <input type="text" id="appNameInput" placeholder="e.g., Notion, Jira" list="appSuggestions">
                                <datalist id="appSuggestions"></datalist>
                            </div>
                            <div class="input-field" style="flex: 1;">
                                <label>Category</label>
                                <select id="categorySelect" class="category-select">
                                    <option value="Productivity">Productivity</option>
                                    <option value="Communication">Communication</option>
                                    <option value="Browsers">Browsers</option>
                                    <option value="Design">Design</option>
                                    <option value="Documents">Documents</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Utilities">Utilities</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: flex-end;">
                                <button id="addCategoryMapping" class="btn secondary btn-sm">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                    Add
                                </button>
                            </div>
                        </div>
                        <div id="categoryMappingsList" class="category-mappings-list"></div>
                    </div>
                </div>

                <div class="setting-actions">
                    <button id="saveSettings" class="btn primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        Save Changes
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script src="app.js"></script>
</body>

</html>